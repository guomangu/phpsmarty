<div id="divMessagesCommentaire" class="invalid-feedback divMessagesFormulaireAdmin"></div>

<form class="formulaireAdmin customShadow" method="POST" action="" enctype="multipart/form-data" onsubmit="return validerModifCommentaire();" autocomplete="off">
    <div class="">
        <label for="idCommentaire">Selectionnez un commentaire</label>
        <input type="text" class="form-control" id="idCommentaire" name="idCommentaire" list="comboCommentaire">
        <datalist id="comboCommentaire">
            {foreach from=$tabTabId['Commentaires'] item=id}
                <option value="{$id}">
            {/foreach}
        </datalist>
    </div>

    <div class="">
        <label for="dateAjoutCommentaire">Date d'ajout</label>
        <input type="datetime-local" class="form-control" id="dateAjoutCommentaire" name="dateAjoutCommentaire"/>   
    </div>

    <div class="">
        <label for="signaleCommentaire">Signalé</label>
        <select id="signaleCommentaire" class="form-control" name="signaleCommentaire">
            <option></option>
            <option value="1">Oui</option>
            <option value="0">Non</option>
        </select>
    </div>

    <div class="">
        <label for="idArticleCommentaire">Identifiant article</label>
        <input type="text" id="idArticleCommentaire" class="form-control" name="idArticleCommentaire" list="comboArticleCommentaire">
        <datalist id="comboArticleCommentaire">
            {foreach from=$tabTabId['Articles'] item=id}
                <option value="{$id}">
            {/foreach}
        </datalist>
    </div>

    <div class="divTextarea formulaireExpand">
        <label for="texteCommentaire">Texte</label>
        <textarea id="texteCommentaire" class="form-control" name="texteCommentaire"></textarea>
    </div>

    <div class="divButton formulaireExpand vCenter">
        <button type="submit" class="btn btn-primary" name="modifierCommentaire">Modifier</button>
    </div>
</form>

<script>
    function validerModifCommentaire()
    {
        document.getElementById( 'divMessagesCommentaire' ).innerHTML = "";
        // contrôles des formulaires nécéssaires
        if ( document.getElementById( 'idCommentaire' ).value == "" )
        {
            document.getElementById( 'idCommentaire' ).classList.add( 'is-invalid' );
            document.getElementById( 'divMessagesCommentaire' ).innerHTML = 'Veuillez préciser un identifiant de commentaire';
            return false;
        }
        else
        {
            document.getElementById( 'idCommentaire' ).classList.remove( 'is-invalid' );
            document.getElementById( 'idCommentaire' ).classList.add( 'is-valid' );
            var submitOK = false;

            if ( document.getElementById( 'dateAjoutCommentaire').value != "" )
            {
                document.getElementById( 'dateAjoutCommentaire').classList.remove( 'is-invalid' );
                document.getElementById( 'dateAjoutCommentaire').classList.add( 'is-valid' );
                submitOK = true;
            }

            if ( document.getElementById( 'signaleCommentaire' ).value != "" )
            {
                document.getElementById( 'signaleCommentaire' ).classList.remove( 'is-invalid' );
                document.getElementById( 'signaleCommentaire' ).classList.add( 'is-valid' );
                submitOK = true;
            }

            if ( document.getElementById( 'idArticleCommentaire' ).value != "" )
            {
                document.getElementById( 'idArticleCommentaire' ).classList.remove( 'is-invalid' );
                document.getElementById( 'idArticleCommentaire' ).classList.add( 'is-valid' );
                submitOK = true;
            }

            if ( document.getElementById( 'texteCommentaire' ).value != "" )
            {
                document.getElementById( 'texteCommentaire' ).classList.remove( 'is-invalid' );
                document.getElementById( 'texteCommentaire' ).classList.add( 'is-valid' );
                submitOK = true;
            }

            if ( submitOK == false )
            {
                document.getElementById( 'dateAjoutCommentaire').classList.add( 'is-invalid' );
                document.getElementById( 'signaleCommentaire' ).classList.add( 'is-invalid' );
                document.getElementById( 'idArticleCommentaire' ).classList.add( 'is-invalid' );
                document.getElementById( 'texteCommentaire' ).classList.add( 'is-invalid' );

                document.getElementById( 'divMessagesCommentaire' ).innerHTML = 'Veuillez remplir au moins 1 de ces champs.';
            }

            return submitOK;
        }
    }
</script>
